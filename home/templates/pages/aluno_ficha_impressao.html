{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<title>Requerimento de Matr√≠cula ‚Äî {{ aluno.nome }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<style>
/* ======== CONFIGURA√á√ÉO DE P√ÅGINA ======== */
@page { size: A4; margin: 6mm 10mm; }

body {
    font-family: "DejaVu Serif", Georgia, serif;
    font-size: 10.8pt;
    line-height: 1.22;
    margin: 0; padding: 0;
    color: #000;
}

/* Ocultar bot√µes na impress√£o */
.only-screen { display:flex; gap:.5rem; margin:10px 0; }
@media print { .only-screen { display:none!important; } }

/* ======== LAYOUT DO CABE√áALHO ======== */
.header {
    display: grid;
    grid-template-columns: 1fr 95px;
    align-items: center;
    gap: 8px;
}

.school-name {
    font-size: 12.6pt;
    font-weight: 700;
    text-transform: uppercase;
    text-align: center;
    color: #c06f1f;
}

.school-sub {
    font-size: 8.6pt;
    text-align: center;
    margin-top: 1px;
}

.foto-box {
    border: 1px solid #444;
    width: 95px;
    height: 118px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 8.5pt;
}

.line { border-top:1px solid #000; margin:5px 0 8px; }

/* ======== BLOCOS ======== */
.box {
    border: 1px solid #fab982;
    padding: 6px 8px;
    margin-top: 5px;
    border-left: 4px solid #c06f1f;
    background: #fffdf9;
}

.box-title {
    font-weight:700;
    font-size:10pt;
    text-transform:uppercase;
    color:#c06f1f;
    margin-bottom:3px;
}

/* ======== CAMPOS ======== */
.fieldline {
    border-bottom:1px solid #000;
    display:inline-block;
    padding:0 1px;
    min-width: 60px;
}

.label { margin-right:4px; }

/* ======== TABELAS ======== */
table.sheet { width:100%; border-collapse:collapse; }
table.sheet td { padding:2px 3px; vertical-align:top; }

.w-30{width:30%} .w-40{width:40%} .w-50{width:50%} .w-60{width:60%}

/* Op√ß√µes */
.opt { margin-right:10px; white-space:nowrap; font-size:10pt; }
.cb { font-weight:bold; }

/* Assinaturas */
.signrow {
    display:flex;
    justify-content:space-between;
    margin-top:14px;
}
.sign { text-align:center; width:45%; font-size:10pt; }
.sign-line { border-top:1px solid #000; margin:14px 0 3px; }
</style>
</head>

<body>

<div class="only-screen">
<button onclick="window.print()">üñ®Ô∏è Imprimir</button>
<a href="javascript:history.back()">‚Üê Voltar</a>
</div>

<!-- ========================= -->
<!-- CABE√áALHO -->
<!-- ========================= -->
<div class="header">
    <div>
        <div class="school-name">{{ aluno.escola.nome|default:"ESCOLA PEQUENO APRENDIZ" }}</div>
        <div class="school-sub">
            {% if aluno.escola %}
                {{ aluno.escola.endereco }}{% if aluno.escola.numero %}, {{ aluno.escola.numero }}{% endif %}
                ‚Äî {{ aluno.escola.bairro }} ‚Äî {{ aluno.escola.cidade }}/{{ aluno.escola.estado }}<br>
                CNPJ: {{ aluno.escola.cnpj|default:"00.000.000/0000-00" }} ‚Ä¢
                E-mail: {{ aluno.escola.email|default:"escola@email.com" }}
            {% else %}
                Endere√ßo: ________ ‚Ä¢ CNPJ: ________ ‚Ä¢ E-mail: ________
            {% endif %}
        </div>
    </div>
    <div class="foto-box">Foto 3x4</div>
</div>

<div class="line"></div>

<!-- T√çTULO -->
<div style="text-align:center; font-weight:bold; font-size:12pt; text-transform:uppercase; margin-bottom:6px;">
REQUERIMENTO DE MATR√çCULA
</div>

<!-- TEXTO INICIAL -->
<div class="req-text" style="margin:4px 0 6px;">
Requeiro a matr√≠cula do(a) aluno(a)
<span class="fieldline" style="min-width:220px">{{ aluno.nome }}</span>
no Ensino:
<span class="fieldline" style="min-width:110px">Fundamental</span>,
S√©rie/Ano:
<span class="fieldline" style="min-width:80px">{{ aluno.serie_ano|default_if_none:"" }}</span>,
Turno:
<span class="fieldline" style="min-width:70px">{{ aluno.turno_aluno|default_if_none:"" }}</span>,
declarando estar ciente do regimento interno e responsabilizando-me pela autenticidade dos documentos.
</div>

<!-- ========================= -->
<!-- ALUNO -->
<!-- ========================= -->
<div class="box">
<div class="box-title">Dados cadastrais do(a) aluno(a)</div>
<table class="sheet">
<tr>
<td class="w-60"><span class="label">Nome:</span>
<span class="fieldline" style="min-width:220px">{{ aluno.nome }}</span></td>
<td class="w-40"><span class="label">Fator RH:</span>
<span class="fieldline" style="min-width:90px">{{ aluno.tipo_sanguineo|default:"" }}</span></td>
</tr>

<tr>
<td><span class="label">CPF:</span>
<span class="fieldline" style="min-width:120px">{{ aluno.cpf|default:"" }}</span></td>
<td><span class="label">RG:</span>
<span class="fieldline" style="min-width:120px">{{ aluno.rg|default:"" }}</span></td>
</tr>

<tr>
<td><span class="label">Data nasc.:</span>
<span class="fieldline" style="min-width:100px">{{ aluno.data_nascimento|date:"d/m/Y" }}</span></td>
<td><span class="label">Naturalidade:</span>
<span class="fieldline" style="min-width:130px">{{ aluno.naturalidade|default:"" }}</span></td>
</tr>

<tr>
<td colspan="2"><span class="label">Endere√ßo:</span>
<span class="fieldline" style="min-width:260px">
{{ aluno.rua }}{% if aluno.numero %}, {{ aluno.numero }}{% endif %}
‚Äî {{ aluno.bairro }} ‚Äî {{ aluno.cidade }}/{{ aluno.estado }}
{% if aluno.cep %} ‚Ä¢ CEP: {{ aluno.cep }}{% endif %}
</span></td>
</tr>

<tr>
<td><span class="label">E-mail:</span>
<span class="fieldline" style="min-width:200px">{{ aluno.email|default:"" }}</span></td>
<td><span class="label">Telefone:</span>
<span class="fieldline" style="min-width:130px">{{ aluno.telefone|default:"" }}</span></td>
</tr>

<tr>
<td><span class="label">Matr√≠cula:</span>
<span class="fieldline" style="min-width:130px">{{ aluno.matricula }}</span></td>
<td><span class="label">Turma/Turno:</span>
<span class="fieldline" style="min-width:150px">
{% if aluno.turmas.all %}
{% for t in aluno.turmas.all %}
{{ t.nome }} ({{ t.turno }}){% if not forloop.last %} ‚Ä¢ {% endif %}
{% endfor %}
{% endif %}
</span></td>
</tr>
</table>
</div>

<!-- ========================= -->
<!-- M√ÉE -->
<!-- ========================= -->
{% if dados_mae %}
<div class="box">
<div class="box-title">Dados cadastrais da m√£e</div>
<table class="sheet">
<tr>
<td class="w-60"><span class="label">Nome:</span>
<span class="fieldline" style="min-width:220px">{{ dados_mae.nome }}</span></td>
<td class="w-40"><span class="label">Identidade:</span>
<span class="fieldline" style="min-width:110px">{{ dados_mae.identidade }}</span></td>
</tr>

<tr>
<td><span class="label">CPF:</span>
<span class="fieldline" style="min-width:120px">{{ dados_mae.cpf }}</span></td>
<td><span class="label">Escolaridade:</span>
<span class="fieldline" style="min-width:120px">{{ dados_mae.escolaridade }}</span></td>
</tr>

<tr>
<td><span class="label">Fone:</span>
<span class="fieldline" style="min-width:150px">{{ dados_mae.telefone }}</span></td>
<td><span class="label">E-mail:</span>
<span class="fieldline" style="min-width:150px">{{ dados_mae.email }}</span></td>
</tr>
</table>
</div>
{% endif %}

<!-- ========================= -->
<!-- PAI -->
<!-- ========================= -->
{% if dados_pai %}
<div class="box">
<div class="box-title">Dados cadastrais do pai</div>
<table class="sheet">
<tr>
<td class="w-60"><span class="label">Nome:</span>
<span class="fieldline" style="min-width:220px">{{ dados_pai.nome }}</span></td>
<td class="w-40"><span class="label">Identidade:</span>
<span class="fieldline" style="min-width:110px">{{ dados_pai.identidade }}</span></td>
</tr>

<tr>
<td><span class="label">CPF:</span>
<span class="fieldline" style="min-width:120px">{{ dados_pai.cpf }}</span></td>
<td><span class="label">Escolaridade:</span>
<span class="fieldline" style="min-width:120px">{{ dados_pai.escolaridade }}</span></td>
</tr>

<tr>
<td><span class="label">Fone:</span>
<span class="fieldline" style="min-width:150px">{{ dados_pai.telefone }}</span></td>
<td><span class="label">E-mail:</span>
<span class="fieldline" style="min-width:150px">{{ dados_pai.email }}</span></td>
</tr>
</table>
</div>
{% endif %}

<!-- ========================= -->
<!-- RESPONS√ÅVEL -->
<!-- ========================= -->
{% if dados_resp %}
<div class="box">
<div class="box-title">Dados cadastrais do respons√°vel</div>
<table class="sheet">
<tr>
<td class="w-60"><span class="label">Nome:</span>
<span class="fieldline" style="min-width:220px">{{ dados_resp.nome }}</span></td>
<td class="w-40"><span class="label">Parentesco:</span>
<span class="fieldline" style="min-width:110px">{{ dados_resp.parentesco }}</span></td>
</tr>

<tr>
<td><span class="label">CPF:</span>
<span class="fieldline" style="min-width:120px">{{ dados_resp.cpf }}</span></td>
<td><span class="label">Identidade:</span>
<span class="fieldline" style="min-width:110px">{{ dados_resp.identidade }}</span></td>
</tr>

<tr>
<td><span class="label">Fone:</span>
<span class="fieldline" style="min-width:150px">{{ dados_resp.telefone }}</span></td>
<td><span class="label">E-mail:</span>
<span class="fieldline" style="min-width:150px">{{ dados_resp.email }}</span></td>
</tr>
</table>
</div>
{% endif %}

<!-- ========================= -->
<!-- SITUA√á√ÉO -->
<!-- ========================= -->
<div class="box">
<div class="box-title">Situa√ß√£o/Op√ß√µes</div>

<div style="display:flex; flex-wrap:wrap; gap:6px 14px; font-size:10pt;">

<div class="opt">( <span class="cb">{% if aluno.situacao_matricula == 'transferencia' or aluno.forma_acesso == 'transferencia' %}X{% endif %}</span> ) Transfer√™ncia</div>

<div class="opt">( <span class="cb">{% if aluno.situacao_matricula == 'matricula' or aluno.forma_acesso == 'matricula' or not aluno.forma_acesso %}X{% endif %}</span> ) Matr√≠cula</div>

<div class="opt">( <span class="cb">{% if aluno.situacao_matricula == 'rematricula' or aluno.forma_acesso == 'rematricula' %}X{% endif %}</span> ) Rematr√≠cula</div>

<div class="opt">N√≠vel/Modalidade:
<span class="fieldline" style="min-width:130px">Fundamental</span></div>

<div class="opt">S√©rie/Ano:
<span class="fieldline" style="min-width:80px">{{ aluno.serie_ano|default_if_none:"" }}</span></div>

<div class="opt">Turno:
<span class="fieldline" style="min-width:70px">{{ aluno.turno_aluno|default_if_none:"" }}</span></div>

<div class="opt">Data ingresso:
<span class="fieldline" style="min-width:80px">{{ aluno.data_ingresso|date:"d/m/Y"|default_if_none:"" }}</span></div>

<div class="opt">Bolsa Fam√≠lia?
Sim ( <span class="cb">{% if aluno.bolsa_familia %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if aluno.bolsa_familia is not None and not aluno.bolsa_familia %}X{% endif %}</span> )</div>

<div class="opt">Transporte escolar:
Sim ( <span class="cb">{% if transporte and transporte.usa_transporte_escolar %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if transporte and not transporte.usa_transporte_escolar %}X{% endif %}</span> )</div>

<div class="opt">Ensino Religioso:
Sim ( <span class="cb">{% if aluno.dispensa_ensino_religioso %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if not aluno.dispensa_ensino_religioso %}X{% endif %}</span> )</div>

<div class="opt">Necessidades Especiais:
Sim ( <span class="cb">{% if saude and saude.possui_necessidade_especial %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if saude and not saude.possui_necessidade_especial %}X{% endif %}</span> )</div>

<div class="opt" style="white-space:normal;">
Descri√ß√£o:
<span class="fieldline" style="min-width:260px">{% if saude %}{{ saude.descricao_necessidade|default:"" }}{% endif %}</span>
</div>

</div>
</div>

<!-- ========================= -->
<!-- COMPLEMENTARES -->
<!-- ========================= -->
<div class="box">
<div class="box-title">Informa√ß√µes complementares</div>
<table class="sheet">

<tr>
<td class="w-60">
Usa medica√ß√£o?
Sim ( <span class="cb">{% if saude and saude.usa_medicacao %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if saude and not saude.usa_medicacao %}X{% endif %}</span> )
</td>
<td class="w-40">Quais?
<span class="fieldline" style="min-width:150px">{% if saude %}{{ saude.quais_medicacoes|default:"" }}{% endif %}</span></td>
</tr>

<tr>
<td>Possui alergia?
Sim ( <span class="cb">{% if saude and saude.possui_alergia %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if saude and not saude.possui_alergia %}X{% endif %}</span> )
</td>
<td>Qual?
<span class="fieldline" style="min-width:150px">{% if saude %}{{ saude.descricao_alergia|default:"" }}{% endif %}</span></td>
</tr>

<tr>
<td colspan="2">Restri√ß√µes alimentares:
<span class="fieldline" style="min-width:250px">{% if saude and saude.restricoes_alimentares %}{{ saude.restricoes_alimentares }}{% endif %}</span>
</td>
</tr>

<tr>
<td>Transporte escolar?
Sim ( <span class="cb">{% if transporte and transporte.usa_transporte_escolar %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if transporte and not transporte.usa_transporte_escolar %}X{% endif %}</span> )
</td>
<td>Trajeto:
<span class="fieldline" style="min-width:150px">{% if transporte %}{{ transporte.trajeto|default:"" }}{% endif %}</span>
</td>
</tr>

<tr>
<td>Autoriza√ß√£o para sair sozinho?
Sim ( <span class="cb">{% if autoriz and autoriz.autorizacao_saida_sozinho %}X{% endif %}</span> )
N√£o ( <span class="cb">{% if autoriz and not autoriz.autorizacao_saida_sozinho %}X{% endif %}</span> )
</td>
<td>Pessoa autorizada:
<span class="fieldline" style="min-width:150px">{% if autoriz %}{{ autoriz.pessoa_autorizada_buscar|default:"" }}{% endif %}</span></td>
</tr>

</table>
</div>

<!-- ========================= -->
<!-- RODAP√â -->
<!-- ========================= -->
<div style="margin-top:10px;">
{% if aluno.escola %}
{{ aluno.escola.cidade }} ‚Äî {{ aluno.escola.estado }},
{% else %}
Camocim de S√£o F√©lix ‚Äî PE,
{% endif %}
{{ hoje_extenso }}
</div>

<!-- Assinaturas -->
<div class="signrow">
<div class="sign"><div class="sign-line"></div>Assinatura do(a) Pai/M√£e ou Respons√°vel</div>
<div class="sign"><div class="sign-line"></div>Diretor(a)</div>
</div>

</body>
</html>
